(function(e){function t(t){for(var a,s,o=t[0],u=t[1],p=t[2],l=0,d=[];l<o.length;l++)s=o[l],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);c&&c(t);while(d.length)d.shift()();return i.push.apply(i,p||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},i=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var p=0;p<o.length;p++)t(o[p]);var c=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},18:function(e,t){},19:function(e,t){},2:function(e,t){},20:function(e,t){},2395:function(e,t,n){},"2db3":function(e,t,n){},3:function(e,t){},4:function(e,t){},"43f5":function(e,t,n){"use strict";n("2db3")},"4c3e":function(e,t,n){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],s=(n("7c55"),n("2877")),o={},u=Object(s["a"])(o,r,i,!1,null,null,null),p=u.exports,c=n("8c4f"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home-page page"},[n("Header",{attrs:{title:"HFSV兑换"}}),n("div",{staticClass:"addr-box"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.walletAddr,expression:"walletAddr"}],staticClass:"addr",attrs:{placeholder:"请输入FSV主网钱包地址"},domProps:{value:e.walletAddr},on:{input:function(t){t.target.composing||(e.walletAddr=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.transNum,expression:"transNum"}],staticClass:"input-box",attrs:{type:"number",placeholder:"请输入兑换数量"},domProps:{value:e.transNum},on:{input:function(t){t.target.composing||(e.transNum=t.target.value)}}})]),n("div",{staticClass:"tip-line"},[e._v("当前钱包的HFSV余额: "+e._s(e.myHfsv)+" HFSV")]),n("div",{staticClass:"tip-line"},[e._v("可兑换 "+e._s(e.canTransFsv)+" FSV")]),n("div",{staticClass:"trans-btn",on:{click:e.toTrans}},[e._v("兑换")]),n("div",{staticClass:"record-list"},[e._m(0),n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading-box"},[n("van-loading",{attrs:{color:"#333333"}})],1),e._l(e.recordList,(function(t){return n("div",{key:t.ts,staticClass:"record-item"},[n("div",[e._v("兑换钱包地址："+e._s(t[1]))]),n("div",[e._v("兑换数量："+e._s(e._f("formatNum")(t[0]))+" HFSV")]),n("div",[e._v("兑换时间："+e._s(e._f("formatTime")(t.ts)))])])}))],2)],1)},d=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-title"},[n("span",[e._v("兑换记录")])])}],y=n("5530"),m=n("1da1"),f=(n("b680"),n("d3b7"),n("25f0"),n("a9e3"),n("96cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[e._v(e._s(e.title))])}),b=[],v={props:["title"]},g=v,w=(n("61b7"),Object(s["a"])(g,f,b,!1,null,"42b7cbf4",null)),h=w.exports,T=n("901e"),x=n.n(T),O={data:function(){return{account:"",myHfsv:"--",canTransFsv:"--",walletAddr:"",transNum:"",recordList:[],loading:!1}},mounted:function(){console.log(this.$coinContract),this.getAccount()},watch:{myHfsv:function(e){this.canTransFsv=e}},methods:{getAccount:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$web3.eth.getAccounts().then(function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(n.length>0)){t.next=10;break}return e.account=n[0],e.getMyBalance(),e.getLogs(),t.next=6,e.getStatus();case 6:a=t.sent,a&&e.toChangePaused(),t.next=11;break;case 10:console.log("no account");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},getLogs:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var n,a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.recordList=[],e.loading=!0,t.next=4,e.$coinContract.methods.getLogs(e.account).call({from:e.account});case 4:n=t.sent,a=[],r=n.length-1;case 7:if(!(r>=0)){t.next=15;break}return t.next=10,e.$coinContract.methods.getLog(n[r]).call({from:e.account});case 10:i=t.sent,a.push(Object(y["a"])(Object(y["a"])({},i),{},{ts:n[r]}));case 12:r--,t.next=7;break;case 15:e.loading=!1,e.recordList=a;case 17:case"end":return t.stop()}}),t)})))()},getStatus:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$coinContract.methods.paused().call({from:e.account});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},toChangePaused:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$coinContract.methods.changePaused().send({from:e.account});case 2:case"end":return t.stop()}}),t)})))()},getMyBalance:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$coinContract.methods.balanceOf(e.account).call();case 2:n=t.sent,a=x()(n).dividedBy(x()("1e18")).toFixed(4,1),e.myHfsv=a;case 5:case"end":return t.stop()}}),t)})))()},toTrans:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.walletAddr){t.next=3;break}return e.$toast({message:"请输入fsv主网钱包地址",position:"top"}),t.abrupt("return");case 3:if(e.transNum){t.next=6;break}return e.$toast({message:"请输入兑换数量",position:"top"}),t.abrupt("return");case 6:if(n=x()(e.transNum).multipliedBy(x()("1e18")),!n.isLessThan(1)){t.next=10;break}return e.$toast({message:"兑换数量过小",position:"top"}),t.abrupt("return");case 10:x.a.config({EXPONENTIAL_AT:30}),console.log(n.toString()),e.$toast.loading({forbidClick:!0,message:"",duration:0}),e.$coinContract.methods.burn(e.walletAddr,n.toString(),(new Date).getTime()).send({from:e.account}).then((function(t){console.log(t),e.$toast.clear(),e.$toast.success("兑换成功"),e.walletAddr="",e.transNum="",e.getMyBalance(),e.getLogs()})).catch((function(t){console.error(t),e.$toast.clear(),e.$toast.fail("兑换失败："+JSON.stringify(t))}));case 14:case"end":return t.stop()}}),t)})))()}},filters:{formatTime:function(e){return new Date(Number(e)).toLocaleString()},formatNum:function(e){return x()(e).dividedBy(x()("1e18")).toFixed(4,1)}},components:{Header:h}},_=O,M=(n("43f5"),Object(s["a"])(_,l,d,!1,null,"49e23254",null)),$=M.exports;a["a"].use(c["a"]);var C=[{path:"/",name:"Home",component:$}],j=new c["a"]({routes:C}),A=j,S=n("2f62");a["a"].use(S["a"]);var k,N=new S["a"].Store({state:{},mutations:{},actions:{},modules:{}}),P=n("d399"),L=n("543e"),R=(n("c2d8"),n("99e5")),F=n.n(R),H=n("ada9");if(window.ethereum){k=window.ethereum;try{window.ethereum.enable()}catch(V){console.error("User denied account access")}}else k=window.web3?window.web3.currentProvider:new F.a.providers.HttpProvider("http://localhost:8545");a["a"].prototype.$web3=new F.a(k),a["a"].prototype.$coinAddr="0xA961711Cbac0936eda4b5DaEa7776b43384312CC",a["a"].prototype.$coinAbi=H,a["a"].prototype.$coinContract=new a["a"].prototype.$web3.eth.Contract(a["a"].prototype.$coinAbi,a["a"].prototype.$coinAddr,{}),a["a"].use(P["a"]),a["a"].use(L["a"]),a["a"].config.productionTip=!1,new a["a"]({router:A,store:N,render:function(e){return e(p)}}).$mount("#app")},6:function(e,t){},"61b7":function(e,t,n){"use strict";n("4c3e")},7:function(e,t){},"7c55":function(e,t,n){"use strict";n("2395")},8:function(e,t){},9:function(e,t){},ada9:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"uint256","name":"totalSupply","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":false,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"string","name":"fsvaccount","type":"string"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"burntotal","type":"uint256"}],"name":"Burn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Paused","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Unpaused","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"fsvaccount","type":"string"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"time","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"string","name":"fsvaccount","type":"string"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"time","type":"uint256"}],"name":"burnFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"changePaused","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"time","type":"uint256"}],"name":"getLog","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"getLogs","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]')}});
//# sourceMappingURL=app.602bfbe5.js.map